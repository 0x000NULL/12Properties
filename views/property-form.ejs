<!DOCTYPE html>
<html>
  <head>
    <title><%= isNew ? 'Add New Property' : 'Edit Property' %> | 12 Properties</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Raleway:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </head>
  <body>
    <!-- Navigation -->
    <nav class="main-nav">
      <div class="logo">12 Properties</div>
      <div class="nav-links">
        <a href="/">Home</a>
        <a href="/properties">Properties</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
        <span class="user-menu">
          <i class="fas fa-user"></i>
          <%= user.name %>
          <form action="/auth/logout" method="POST" class="logout-form">
            <button type="submit" class="btn-text">Logout</button>
          </form>
        </span>
      </div>
    </nav>

    <main class="property-form-main">
      <div class="form-container">
        <h1><%= isNew ? 'Add New Property' : 'Edit Property' %></h1>
        
        <% if (typeof error !== 'undefined' && error) { %>
          <div class="alert alert-error">
            <%= error %>
          </div>
        <% } %>

        <form action="<%= isNew ? '/manage/new' : `/manage/edit/${property._id}` %>" 
              method="POST" 
              enctype="multipart/form-data"
              class="property-form">
          
          <div class="form-grid">
            <div class="form-group">
              <label for="title">Property Title*</label>
              <input type="text" 
                     id="title" 
                     name="title" 
                     value="<%= property ? property.title : '' %>"
                     required>
            </div>

            <div class="form-group">
              <label for="location">Location*</label>
              <input type="text" 
                     id="location" 
                     name="location"
                     value="<%= property ? property.location : '' %>"
                     required>
            </div>

            <div class="form-group">
              <label for="price">Price*</label>
              <input type="number" 
                     id="price" 
                     name="price"
                     value="<%= property ? property.price : '' %>"
                     min="0"
                     required>
            </div>

            <div class="form-group">
              <label for="status">Status*</label>
              <select id="status" name="status" required>
                <option value="Active" <%= property && property.status === 'Active' ? 'selected' : '' %>>Active</option>
                <option value="Pending" <%= property && property.status === 'Pending' ? 'selected' : '' %>>Pending</option>
                <option value="Sold" <%= property && property.status === 'Sold' ? 'selected' : '' %>>Sold</option>
              </select>
            </div>

            <div class="form-group">
              <label for="beds">Bedrooms*</label>
              <input type="number" 
                     id="beds" 
                     name="beds"
                     value="<%= property ? property.beds : '' %>"
                     min="0"
                     required>
            </div>

            <div class="form-group">
              <label for="baths">Bathrooms*</label>
              <input type="number" 
                     id="baths" 
                     name="baths"
                     value="<%= property ? property.baths : '' %>"
                     min="0"
                     step="0.5"
                     required>
            </div>

            <div class="form-group">
              <label for="sqft">Square Feet*</label>
              <input type="number" 
                     id="sqft" 
                     name="sqft"
                     value="<%= property ? property.sqft : '' %>"
                     min="0"
                     required>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="description">Description*</label>
            <textarea id="description" 
                      name="description" 
                      rows="4"
                      required><%= property ? property.description : '' %></textarea>
          </div>

          <div class="form-group full-width">
            <label for="features">Features (comma-separated)</label>
            <input type="text" 
                   id="features" 
                   name="features"
                   value="<%= property ? property.features.join(', ') : '' %>"
                   placeholder="e.g., Pool, Garden, Garage">
          </div>

          <div class="form-group full-width">
            <label for="mainImage">Main Image*</label>
            <input type="file" 
                   id="mainImage" 
                   name="mainImage"
                   accept="image/*"
                   <%= isNew ? 'required' : '' %>>
            <% if (property && property.mainImage) { %>
              <div class="current-image">
                <img src="<%= property.mainImage %>" alt="Current main image">
                <p>Current main image</p>
              </div>
            <% } %>
          </div>

          <div class="form-group full-width">
            <label for="images">Additional Images (up to 5)</label>
            <input type="file" 
                   id="images" 
                   name="images"
                   accept="image/*"
                   multiple>
            <% if (property && property.images && property.images.length > 0) { %>
              <div class="image-grid">
                <% property.images.forEach(image => { %>
                  <div class="current-image">
                    <img src="<%= image %>" alt="Property image">
                  </div>
                <% }) %>
              </div>
            <% } %>
          </div>

          <div class="form-actions">
            <form action="/manage" method="GET" style="display: inline;">
              <button type="submit" class="btn-secondary">
                Cancel
              </button>
            </form>
            <button type="submit" class="btn-primary">
              <%= isNew ? 'Create Property' : 'Update Property' %>
            </button>
          </div>
        </form>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <div class="footer-section">
          <h3>12 Properties</h3>
          <p>Your gateway to exceptional living</p>
        </div>
        <div class="footer-section">
          <h3>Contact</h3>
          <p>Email: info@12mgt.com</p>
          <p>Phone: +1 (555) 123-4567</p>
        </div>
        <div class="footer-section">
          <h3>Follow Us</h3>
          <div class="social-links">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-linkedin"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 12 Properties. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html> 